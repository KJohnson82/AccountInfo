@* @page "/metalmart"

<TelerikTileLayout Columns="4"
                   Height="100%"
                   Width="100%"
                   ColumnSpacing="10px"
                   RowSpacing="10px"
                   Resizable="true"
                   Reorderable="true"
                   Class="bg-light">
    <TileLayoutItems>
        <TileLayoutItem RowSpan="2" ColSpan="4" class="bg-primary text-white fs-4">
            <Content>Metal Mart Accounts</Content>
        </TileLayoutItem>

        <TileLayoutItem HeaderText="Location Select" RowSpan="6" ColSpan="1">
            <Content>
                <div style="height: 100%; overflow: hidden;">

                </div>
            </Content>
        </TileLayoutItem>
        <TileLayoutItem HeaderText="Account Details" RowSpan="6" ColSpan="3">
            <Content>

            </Content>
        </TileLayoutItem>
    </TileLayoutItems>
</TelerikTileLayout>

@code {
    private List<LocationDto>? locations;
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var allLocations = await ApiClient.GetLocationsAsync();
            locations = allLocations?
                .Where(l => l.Loctype == 2) // 2 = MetalMart
                .ToList() ?? new();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading Metal Mart locations: {ex.Message}");
            locations = new();
        }
        finally
        {
            isLoading = false;
        }
    }
} *@

@page "/metalmart"

@using AccountInfo.Shared.DTOs
@using AccountInfo.Web.Components.Layout
@using AccountInfo.Web.Services

@inject ApiClient ApiClient

<AccountPageLayout PageTitle="Metal Mart Accounts"
                   Locations="@locations"
                   IsLoadingLocations="@isLoading" />

@code {
    private List<LocationDto>? locations;
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var allLocations = await ApiClient.GetLocationsAsync();
            locations = allLocations?
                .Where(l => l.Loctype == 2) // 2 = MetalMart
                .ToList() ?? new();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading Metal Mart locations: {ex.Message}");
            locations = new();
        }
        finally
        {
            isLoading = false;
        }
    }
}