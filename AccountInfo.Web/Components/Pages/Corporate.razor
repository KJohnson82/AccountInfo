@* @page "/corporate"
@using AccountInfo.Data.Models
@using AccountInfo.Shared.DTOs
@using AccountInfo.Web.Services

@inject ApiClient ApiClient
@inject NavigationManager NavigationManager

<div class="">
<TelerikTileLayout Columns="4"
                   Height="calc(100vh - var(--app-bottom-bar-height, 100px) - 1rem)"
                   ColumnSpacing="10px"
                   RowSpacing="10px"
                   Resizable="true"
                   Reorderable="false"
                   Class="tilelayoutmain pt-0  ">
    <TileLayoutItems>
        <TileLayoutItem RowSpan="1" ColSpan="4" Class="tilelayoutheader fs-4 text-uppercase fw-bold text-start pb-3" >
            <Content>Corporate Accounts</Content>
        </TileLayoutItem>

        <TileLayoutItem HeaderText="Location Select" RowSpan="6" ColSpan="1" >
            <Content>
                <div class="button-page-container">
                    <div class="scrollable-wrapper">
                        <TelerikListView Data="@Locations" EnableLoaderContainer="true" Class="button-list-container" >
                            <Template Context="loc">
                                <TelerikPanelBar>

                                </TelerikPanelBar>
                                <NavLink href="@($"/corporate/{loc.Id}")" class="k-text-no-underline k-shadow">
                                    <div class="menu-item rounded-3 k-d-flex k-flex-row k-text-uppercase k-font-size-lg k-font-semibold k-text-white k-justify-content-start k-align-items-center k-pl-10 k-bg-gradient k-py-6 k-px-10 hover:k-elevation-2">
                                        @loc.LocName
                                    </div>
                                    </NavLink>
                                </Template>

                        </TelerikListView>

                    </div>
                </div>
            </Content>
        </TileLayoutItem>
        <TileLayoutItem HeaderText="Account Details" RowSpan="6" ColSpan="3">
            <Content>

            </Content>
        </TileLayoutItem>
    </TileLayoutItems>
</TelerikTileLayout>

</div>

<style>

    
    .menu-item {
        background-color: var(--kendo-color-primary);
        margin: 8px 10px;
        padding: 10px 6px 10px 6px;
        border-radius: 0.75rem;
        flex: 1;
        letter-spacing: 0.5px;
    }

    .tilelayoutmain {
        background-color: var(--kendo-color-secondary-subtle);
        
    }

        .menu-item:hover {
            transition: transform 0.2s ease-in, opacity 0.2s ease-in;
            transform: translateY(0) scale(0.95);
        background-color: var(--kendo-color-primary-hover);
        }

    .button-page-container {
        height: calc(100% - 60px);
        display: flex;
        flex-direction: column;
        background-color: var(--kendo-color-secondary-emphasis);
    }

    .button-list-container {
        background-color: transparent !important;
        flex: 1;
        display: flex;
        flex-direction: column;
        margin: 1px 0;
        padding: 2px 0;
        overflow-y: auto;
    }

    .scrollable-wrapper {
        flex: 1;
        overflow-y: auto;
        margin: 1px 0;
        padding: 0px 0;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

        .scrollable-wrapper::-webkit-scrollbar {
            display: none;
        }
    .tilelayoutheader {
        background-color: var(--kendo-color-primary, var(--kendo-primary, #0d6efd));
        color: var(--kendo-color-primary-contrast, #fff);
        letter-spacing: 1px;
    }


    .tile-panel-inner {
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow: auto;
        padding: 0.5rem;
        box-sizing: border-box;
    }
</style>

@code {

    private LocationDto? corporate;
    private List<LocationDto> Locations = new List<LocationDto>();

    protected override async Task OnInitializedAsync()
    {
        corporate = await ApiClient.GetLocationByIdAsync(1);

        if (corporate is not null)
        {
            Locations = new List<LocationDto> { corporate };
        }
    }

}
 *@

@page "/corporate"

@using AccountInfo.Shared.DTOs
@using AccountInfo.Web.Components.Layout
@using AccountInfo.Web.Services

@inject ApiClient ApiClient

<AccountPageLayout PageTitle="Corporate Accounts"
                   Locations="@locations"
                   IsLoadingLocations="@isLoading">
    <HeaderActions>
        @* Optional: Add buttons for creating new providers, etc. *@
        @* <TelerikButton Icon="@SvgIcon.Plus" ThemeColor="@ThemeConstants.Button.ThemeColor.Light">
            Add Provider
        </TelerikButton> *@
    </HeaderActions>
</AccountPageLayout>

@code {
    private List<LocationDto>? locations;
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            // TODO: Replace with GetLocationsByLoctypeAsync(1) when that endpoint exists
            // For now, filter client-side
            var allLocations = await ApiClient.GetLocationsAsync();
            locations = allLocations?
                .Where(l => l.Loctype == 1) // 1 = Corporate
                .ToList() ?? new();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading corporate locations: {ex.Message}");
            locations = new();
        }
        finally
        {
            isLoading = false;
        }
    }
}